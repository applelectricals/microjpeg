import{h as f,r as n,j as e}from"./index-BmEBa6jd.js";import{C as j,a as g,b as N,c as w,d as v}from"./card-BgNaLGW4.js";import{B as y}from"./button-COO6ib03.js";import{A as b,a as P}from"./alert-Cwr1IrGR.js";import{Z as C}from"./zap-BJ-kN9H2.js";import{S as s}from"./shield-COZGxWZ5.js";import{L as S}from"./loader-circle-DpNKEe5d.js";import{C as z}from"./credit-card-K3L1u0Mu.js";function F(){const[D,l]=f(),[m,i]=n.useState(!1),[d,t]=n.useState(null),[x,h]=n.useState(null);n.useEffect(()=>{const r=new URLSearchParams(window.location.search).get("order_id");if(!r){t("Invalid order ID");return}h({orderId:r,amount:7500,currency:"INR"});const a=document.createElement("script");return a.src="https://checkout.razorpay.com/v1/checkout.js",a.async=!0,document.body.appendChild(a),()=>{document.body.removeChild(a)}},[]);const u=async()=>{if(!x||!window.Razorpay){t("Payment system not ready");return}i(!0),t(null);try{const r=await(await fetch("/api/payment/razorpay/create-order",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:7500,currency:"INR",plan:"test-premium"})})).json();if(!r.success)throw new Error(r.error||"Failed to create order");const a={key:r.key,amount:r.amount,currency:r.currency,name:"Micro JPEG",description:"Test Premium - 24 Hour Trial",order_id:r.order_id,handler:async function(c){try{if((await(await fetch("/api/payment/razorpay/verify",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({razorpay_order_id:c.razorpay_order_id,razorpay_payment_id:c.razorpay_payment_id,razorpay_signature:c.razorpay_signature,plan:"test_premium"})})).json()).success)l("/subscription-success?plan=test-premium");else throw new Error("Payment verification failed")}catch(p){console.error("Payment verification error:",p),t("Payment verification failed. Please contact support.")}},prefill:{name:"Test User",email:"test@microjpeg.com"},theme:{color:"#AD0000"},modal:{ondismiss:function(){i(!1),t("Payment cancelled")}}};new window.Razorpay(a).open()}catch(o){t(o.message||"Failed to initiate payment")}finally{i(!1)}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-b from-white to-gray-50 dark:from-gray-950 dark:to-gray-900 py-12",children:e.jsxs("div",{className:"container mx-auto px-4 max-w-2xl",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Complete Your Payment"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Secure ₹75 payment for 24-hour Test Premium access (≈ $1 USD)"})]}),e.jsxs(j,{className:"border-2 border-[#AD0000]",children:[e.jsxs(g,{className:"text-center",children:[e.jsx("div",{className:"mx-auto mb-4 w-12 h-12 bg-gradient-to-r from-[#AD0000] to-red-600 rounded-full flex items-center justify-center",children:e.jsx(C,{className:"w-6 h-6 text-white"})}),e.jsx(N,{className:"text-xl",children:"Test Premium"}),e.jsxs("div",{className:"text-3xl font-bold text-[#AD0000]",children:["₹75",e.jsx("span",{className:"text-lg text-gray-600",children:"/24 hours"})]}),e.jsx(w,{children:"≈ $1 USD • Perfect for testing Premium features"})]}),e.jsxs(v,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-semibold",children:"You'll get instant access to:"}),e.jsxs("ul",{className:"space-y-1",children:[e.jsxs("li",{className:"flex items-center text-sm",children:[e.jsx(s,{className:"w-4 h-4 text-green-500 mr-2"}),"50MB max file size"]}),e.jsxs("li",{className:"flex items-center text-sm",children:[e.jsx(s,{className:"w-4 h-4 text-green-500 mr-2"}),"All Premium features"]}),e.jsxs("li",{className:"flex items-center text-sm",children:[e.jsx(s,{className:"w-4 h-4 text-green-500 mr-2"}),"Advanced quality controls"]}),e.jsxs("li",{className:"flex items-center text-sm",children:[e.jsx(s,{className:"w-4 h-4 text-green-500 mr-2"}),"No ads"]}),e.jsxs("li",{className:"flex items-center text-sm",children:[e.jsx(s,{className:"w-4 h-4 text-green-500 mr-2"}),"Priority support"]})]})]}),d&&e.jsx(b,{variant:"destructive",children:e.jsx(P,{children:d})}),e.jsx(y,{onClick:u,disabled:m||!x,className:"w-full bg-[#AD0000] hover:bg-red-700 text-white py-3 text-lg","data-testid":"button-pay",children:m?e.jsxs(e.Fragment,{children:[e.jsx(S,{className:"w-5 h-5 mr-2 animate-spin"}),"Processing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(z,{className:"w-5 h-5 mr-2"}),"Pay ₹75 Securely"]})}),e.jsxs("div",{className:"text-center text-sm text-gray-500",children:[e.jsx(s,{className:"w-4 h-4 inline mr-1"}),"Secured by Razorpay • 256-bit SSL encryption"]})]})]}),e.jsx("div",{className:"text-center mt-6",children:e.jsx(y,{variant:"link",onClick:()=>l("/simple-pricing"),className:"text-gray-600 hover:text-[#AD0000]",children:"← Back to pricing"})})]})})}export{F as default};
