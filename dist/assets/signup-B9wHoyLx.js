import{g as L,h as M,r as x,f as T,i as z,j as e,X as b,L as q,k as v}from"./index-BmEBa6jd.js";import{u as B,l as H,t as I,s as U}from"./mascot_1758657553459-C4i0Pvi2.js";import{u as J}from"./useMutation-DR4V7Yvb.js";import{B as j}from"./button-COO6ib03.js";import{I as h}from"./input-BfSCZEWr.js";import{L as u}from"./label-D26nqQw_.js";import{C as O,a as $,b as D,c as G,d as Q}from"./card-BgNaLGW4.js";import{A as R,a as V}from"./alert-Cwr1IrGR.js";import{S as _}from"./separator-87zXL1mx.js";import{U as w}from"./user-ClhsnFBi.js";import{M as K}from"./mail-Jla-S5RN.js";import{L as S}from"./loader-circle-DpNKEe5d.js";import{C}from"./check-ClNaaFQm.js";import{E as X,a as Z}from"./eye-BUyvOuDY.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=L("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);function he(){var y;const[,c]=M(),[p,k]=x.useState(!1),[t,g]=x.useState(null),[P,N]=x.useState(!1),{toast:f}=T(),E=z(),s=B({resolver:I(U),defaultValues:{email:"",password:"",firstName:"",lastName:""}}),n=s.watch("email"),i=s.watch("password");x.useEffect(()=>{const r=setTimeout(async()=>{if(!n||!n.includes("@")){g(null);return}N(!0);try{const F=await(await v("POST","/api/auth/check-email",{email:n})).json();g(F.available)}catch{g(null)}finally{N(!1)}},500);return()=>clearTimeout(r)},[n]);const m={length:i.length>=8,uppercase:/[A-Z]/.test(i),lowercase:/[a-z]/.test(i),number:/[0-9]/.test(i)},l=J({mutationFn:async a=>await(await v("POST","/api/auth/signup",a)).json(),onSuccess:a=>{E.invalidateQueries({queryKey:["/api/auth/user"]}),f({title:"Account Created!",description:"Please check your email to verify your account before using all features."});const r=a.user,o=(r==null?void 0:r.subscription_tier)||(r==null?void 0:r.subscriptionTier);c(o==="test_premium"?"/test-premium":o==="premium"?"/compress-premium":o==="enterprise"?"/compress-enterprise":"/")},onError:a=>{f({title:"Signup failed",description:a.message||"Please check your information and try again.",variant:"destructive"})}}),A=a=>{if(t===!1){f({title:"Email unavailable",description:"This email is already registered. Please use a different email.",variant:"destructive"});return}l.mutate(a)},d=({check:a,label:r})=>e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a?e.jsx(C,{className:"w-4 h-4 text-green-500"}):e.jsx(b,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:a?"text-green-700":"text-gray-500",children:r})]});return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-teal-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-md w-full space-y-8",children:[e.jsxs("div",{className:"text-center space-y-3",children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsx("img",{src:H,alt:"MicroJPEG Logo",className:"w-16 h-16",style:{mixBlendMode:"multiply"}})}),e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-orange-600 via-yellow-500 to-orange-600 bg-clip-text text-transparent",children:"MicroJPEG"}),e.jsx("p",{className:"text-gray-700 text-lg font-medium",children:"Professional image compression"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Create your account and start optimizing images instantly"})]}),e.jsxs(O,{className:"border-2 border-orange-100 shadow-2xl bg-white/95 backdrop-blur-sm",children:[e.jsx($,{className:"space-y-4 pb-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx(D,{className:"text-2xl font-semibold text-gray-900",children:"Create your account"}),e.jsx(G,{className:"text-gray-600 mt-2",children:"Join thousands of users compressing images efficiently"})]})}),e.jsxs(Q,{className:"space-y-6",children:[e.jsxs(j,{onClick:()=>window.location.href="/api/login",variant:"outline",className:"w-full h-12 border-2 border-blue-200 hover:border-blue-400 hover:bg-blue-50 transition-all duration-200 text-gray-800 hover:text-blue-900 font-medium shadow-md hover:shadow-lg","data-testid":"button-google-signup",children:[e.jsxs("svg",{className:"w-5 h-5 mr-3",viewBox:"0 0 24 24",children:[e.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),e.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),e.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),e.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Sign in with Google"]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx(_,{className:"w-full"})}),e.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsx("span",{className:"bg-white px-3 text-gray-500 font-medium",children:"Or create with email"})})]}),e.jsxs("form",{onSubmit:s.handleSubmit(A),className:"space-y-5",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"firstName",className:"text-sm font-medium text-gray-700",children:"First Name"}),e.jsxs("div",{className:"relative",children:[e.jsx(w,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),e.jsx(h,{id:"firstName",placeholder:"John",...s.register("firstName"),className:`pl-10 h-12 border-orange-200 focus:border-orange-400 focus:ring-orange-400 ${s.formState.errors.firstName?"border-red-500 focus:border-red-500 focus:ring-red-500":""}`})]}),s.formState.errors.firstName&&e.jsx("p",{className:"text-sm text-red-500 flex items-center gap-1",children:s.formState.errors.firstName.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"lastName",className:"text-sm font-medium text-gray-700",children:"Last Name"}),e.jsxs("div",{className:"relative",children:[e.jsx(w,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),e.jsx(h,{id:"lastName",placeholder:"Doe",...s.register("lastName"),className:`pl-10 h-12 border-orange-200 focus:border-orange-400 focus:ring-orange-400 ${s.formState.errors.lastName?"border-red-500 focus:border-red-500 focus:ring-red-500":""}`})]}),s.formState.errors.lastName&&e.jsx("p",{className:"text-sm text-red-500 flex items-center gap-1",children:s.formState.errors.lastName.message})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"email",className:"text-sm font-medium text-gray-700",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx(K,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),e.jsx(h,{id:"email",type:"email",placeholder:"Enter your email",...s.register("email"),className:`pl-10 pr-10 h-12 border-orange-200 focus:border-orange-400 focus:ring-orange-400 ${s.formState.errors.email?"border-red-500 focus:border-red-500 focus:ring-red-500":""}`}),e.jsx("div",{className:"absolute right-3 top-3",children:P?e.jsx(S,{className:"w-5 h-5 animate-spin text-gray-400"}):t===!0?e.jsx(C,{className:"w-5 h-5 text-green-500"}):t===!1?e.jsx(b,{className:"w-5 h-5 text-red-500"}):null})]}),s.formState.errors.email&&e.jsx("p",{className:"text-sm text-red-500 flex items-center gap-1",children:s.formState.errors.email.message}),t===!1&&e.jsx("p",{className:"text-sm text-red-500 flex items-center gap-1",children:"This email is already registered"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"password",className:"text-sm font-medium text-gray-700",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(h,{id:"password",type:p?"text":"password",placeholder:"Create a strong password",...s.register("password"),className:`pr-12 h-12 border-orange-200 focus:border-orange-400 focus:ring-orange-400 ${s.formState.errors.password?"border-red-500 focus:border-red-500 focus:ring-red-500":""}`}),e.jsx(j,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 hover:bg-transparent text-gray-400 hover:text-gray-600",onClick:()=>k(!p),children:p?e.jsx(X,{className:"w-5 h-5"}):e.jsx(Z,{className:"w-5 h-5"})})]}),i&&e.jsxs("div",{className:"space-y-2 mt-3 p-4 bg-gradient-to-r from-gray-50 to-gray-100 rounded-lg border border-gray-200",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Password requirements:"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(d,{check:m.length,label:"8+ characters"}),e.jsx(d,{check:m.uppercase,label:"Uppercase"}),e.jsx(d,{check:m.lowercase,label:"Lowercase"}),e.jsx(d,{check:m.number,label:"Number"})]})]}),s.formState.errors.password&&e.jsx("p",{className:"text-sm text-red-500 flex items-center gap-1",children:s.formState.errors.password.message})]}),l.error&&e.jsx(R,{variant:"destructive",className:"border-red-200 bg-red-50",children:e.jsx(V,{className:"text-red-700",children:((y=l.error)==null?void 0:y.message)||"Signup failed. Please try again."})}),e.jsx(j,{type:"submit",className:"w-full h-12 bg-gradient-to-r from-orange-500 to-yellow-500 hover:from-orange-600 hover:to-yellow-600 text-white font-bold shadow-lg hover:shadow-xl transform hover:scale-[1.02] transition-all duration-200",disabled:l.isPending||t===!1,children:l.isPending?e.jsxs(e.Fragment,{children:[e.jsx(S,{className:"w-5 h-5 mr-2 animate-spin"}),"Creating account..."]}):e.jsxs(e.Fragment,{children:[e.jsx(W,{className:"w-5 h-5 mr-2"}),"Create Account"]})})]}),e.jsxs("div",{className:"pt-4 border-t border-gray-100",children:[e.jsxs("p",{className:"text-center text-sm text-gray-600",children:["Already have an account?"," ",e.jsx(q,{href:"/login",className:"font-bold text-orange-600 hover:text-orange-700 transition-colors duration-200",children:"Sign in here"})]}),e.jsx("div",{className:"text-center mt-3",children:e.jsx("p",{className:"text-xs text-gray-600 font-medium",children:"✓ Free forever plan ✓ No credit card required ✓ Start compressing immediately"})})]})]})]})]})})}export{he as default};
