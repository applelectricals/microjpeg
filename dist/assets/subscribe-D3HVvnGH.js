const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/PayPalButton-BKhj6YGc.js","assets/index-BmEBa6jd.js","assets/index-CI0S7VqP.css"])))=>i.map(i=>d[i]);
import{r as o,j as e,_ as F,h as z,e as G,k as U}from"./index-BmEBa6jd.js";import{B as b}from"./button-COO6ib03.js";import{C as v,a as j,b as C,c as E,d as N}from"./card-BgNaLGW4.js";import{I as y}from"./input-BfSCZEWr.js";import{L as w}from"./label-D26nqQw_.js";import{A as $,a as q}from"./alert-Cwr1IrGR.js";import{L as A}from"./loader-circle-DpNKEe5d.js";import{C as B}from"./check-ClNaaFQm.js";import{Z as T}from"./zap-BJ-kN9H2.js";import{B as J}from"./building-2-BSxw8i-c.js";const R=o.lazy(()=>F(()=>import("./PayPalButton-BKhj6YGc.js"),__vite__mapDeps([0,1,2])));function V({amount:s,currency:t,intent:i,className:a="",children:r}){const[m,l]=o.useState(!1),[u,g]=o.useState(!1),x=()=>{g(!0),l(!0)};return o.useEffect(()=>{const h=setTimeout(()=>{u||l(!0)},3e3);return()=>clearTimeout(h)},[u]),m?e.jsx(o.Suspense,{fallback:e.jsxs(b,{className:a,disabled:!0,children:[e.jsx(A,{className:"w-4 h-4 mr-2 animate-spin"}),"Loading PayPal..."]}),children:e.jsx(R,{amount:s,currency:t,intent:i})}):e.jsx(b,{onClick:x,className:`${a} bg-[#0070ba] hover:bg-[#005ea6] text-white font-medium`,children:r||"Pay with PayPal"})}function W(s){if(window.__seo_authoritative||window.location.pathname.match(/^\/(convert|compress)\//))return;s.title&&(document.title=s.title);const t=(i,a,r=!1)=>{const m=r?"property":"name";let l=document.querySelector(`meta[${m}="${i}"]`);l||(l=document.createElement("meta"),l.setAttribute(m,i),document.head.appendChild(l)),l.setAttribute("content",a)};if(s.description&&t("description",s.description),s.keywords&&t("keywords",s.keywords),s.ogTitle&&t("og:title",s.ogTitle,!0),s.ogDescription&&t("og:description",s.ogDescription,!0),s.ogImage&&t("og:image",s.ogImage,!0),s.ogType&&t("og:type",s.ogType,!0),s.twitterCard&&t("twitter:card",s.twitterCard),s.twitterTitle&&t("twitter:title",s.twitterTitle),s.twitterDescription&&t("twitter:description",s.twitterDescription),s.twitterImage&&t("twitter:image",s.twitterImage),s.canonical){let i=document.querySelector('link[rel="canonical"]');i||(i=document.createElement("link"),i.setAttribute("rel","canonical"),document.head.appendChild(i)),i.setAttribute("href",s.canonical)}}const Y={landing:{title:"MicroJPEG - Fast Image Compression | Reduce JPEG File Size by 90%",description:"Compress JPEG, PNG, WebP & AVIF images up to 90% smaller while maintaining quality. Free online image optimizer with advanced compression algorithms.",keywords:"image compression, JPEG optimizer, reduce file size, image compressor, photo compression, online tool",ogTitle:"MicroJPEG - Smart Image Compression Tool",ogDescription:"Compress images up to 90% smaller while maintaining quality. Free, fast, and secure.",ogType:"website",twitterCard:"summary_large_image",canonical:window.location.origin+"/"},pricing:{title:"MicroJPEG Pricing - Affordable Image Compression Plans",description:"Choose the perfect plan for your image compression needs. Free tier available with premium options for professionals and enterprises.",keywords:"image compression pricing, photo optimizer cost, bulk image compression",ogTitle:"MicroJPEG Pricing Plans",ogDescription:"Affordable image compression plans for every need.",canonical:window.location.origin+"/pricing"},subscribe:{title:"Subscribe to MicroJPEG Premium - Enhanced Image Compression",description:"Upgrade to MicroJPEG Premium for unlimited compressions, larger file sizes, and priority support. Start your subscription today.",keywords:"image compression subscription, premium photo optimizer, bulk image processing",ogTitle:"MicroJPEG Premium Subscription",ogDescription:"Upgrade to premium for unlimited image compression and advanced features.",canonical:window.location.origin+"/subscribe"}};function H(s){const t=Y[s];t&&W(t)}class Z{constructor(){this.metrics={},this.observers=[],this.initializeObservers()}initializeObservers(){if("PerformanceObserver"in window){try{const t=new PerformanceObserver(i=>{const a=i.getEntries(),r=a[a.length-1];this.metrics.lcp=r.startTime,this.sendMetrics("lcp",r.startTime)});t.observe({type:"largest-contentful-paint",buffered:!0}),this.observers.push(t)}catch{console.warn("LCP observer not supported")}try{const t=new PerformanceObserver(i=>{i.getEntries().forEach(r=>{this.metrics.fid=r.processingStart-r.startTime,this.sendMetrics("fid",r.processingStart-r.startTime)})});t.observe({type:"first-input",buffered:!0}),this.observers.push(t)}catch{console.warn("FID observer not supported")}try{const t=new PerformanceObserver(i=>{let a=0;i.getEntries().forEach(r=>{r.hadRecentInput||(a+=r.value)}),this.metrics.cls=a,this.sendMetrics("cls",a)});t.observe({type:"layout-shift",buffered:!0}),this.observers.push(t)}catch{console.warn("CLS observer not supported")}}"performance"in window&&"timing"in performance&&window.addEventListener("load",()=>{const t=performance.timing,i=t.responseStart-t.navigationStart;this.metrics.ttfb=i,this.sendMetrics("ttfb",i)})}sendMetrics(t,i){typeof gtag<"u"&&gtag("event",t,{event_category:"Web Vitals",value:Math.round(i),non_interaction:!0})}getMetrics(){return{...this.metrics}}reportPageLoad(t){"performance"in window&&window.addEventListener("load",()=>{const i=performance.timing.loadEventEnd-performance.timing.navigationStart;this.sendMetrics(`page_load_${t}`,i)})}measureFunction(t,i){const a=performance.now(),r=i(),m=performance.now()-a;return m>50&&console.warn(`[Performance] Slow operation ${t}: ${Math.round(m)}ms`),r}cleanup(){this.observers.forEach(t=>t.disconnect()),this.observers=[]}}const K=new Z,M={"test-premium":{id:"test-premium",name:"Test Premium",price:"$1",operations:"300 operations (24-hour access)",features:["50MB max file size","All Premium features","Advanced quality controls","No ads","Priority support","3 concurrent uploads","Perfect for testing Premium"],icon:T},premium:{id:"premium",name:"Premium Plan",price:"$29",operations:"10,000 operations/month",features:["50MB max file size","Email support","Higher processing priority","100 operations/hour","3 concurrent uploads","Overage: $0.005/operation"],icon:T},enterprise:{id:"enterprise",name:"Enterprise Plan",price:"$99",operations:"50,000 operations/month",features:["200MB max file size","Priority support","SLA guarantee","No rate limits","5 concurrent uploads","Custom integrations"],icon:J}};function ce(){const[s,t]=z(),{isAuthenticated:i,user:a}=G(),[r,m]=o.useState("premium"),[l,u]=o.useState(!1);o.useEffect(()=>{H("subscribe"),K.reportPageLoad("subscribe")},[]);const[g,x]=o.useState(null),[h,S]=o.useState(""),[f,I]=o.useState(""),[P,L]=o.useState(""),[k,_]=o.useState("");o.useEffect(()=>{const d=new URLSearchParams(window.location.search).get("plan");d&&M[d]&&m(d),a&&typeof a=="object"&&"email"in a&&typeof a.email=="string"&&S(a.email)},[a]);const D=async c=>{c.preventDefault(),u(!0),x(null);try{if(!i&&r!=="test-premium"){if(!h||!f||!P)throw new Error("Please fill in all required fields");if(f!==P)throw new Error("Passwords do not match");if(f.length<8)throw new Error("Password must be at least 8 characters")}const p=await(await U("POST","/api/create-subscription",{planId:r,...!i&&r!=="test-premium"&&{email:h,password:f,companyName:k}})).json();if(!p.success)throw new Error(p.message||"Failed to create subscription");if(p.checkoutUrl)p.paymentProvider==="razorpay"?t(p.checkoutUrl):window.location.href=p.checkoutUrl;else throw new Error("No checkout URL received")}catch(d){x(d.message||"Failed to create subscription")}finally{u(!1)}},n=M[r];if(!n)return t("/simple-pricing"),null;const O=n.icon;return e.jsx("div",{className:"min-h-screen bg-gradient-to-b from-white to-gray-50 dark:from-gray-950 dark:to-gray-900 py-12",children:e.jsxs("div",{className:"container mx-auto px-4 max-w-2xl",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:["Subscribe to ",n.name]}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300",children:["Complete your order to get started with ",n.operations]})]}),e.jsxs("form",{onSubmit:D,className:"space-y-8",children:[e.jsxs(v,{className:"border-2 border-[#AD0000]",children:[e.jsxs(j,{className:"text-center",children:[e.jsx("div",{className:"mx-auto mb-4 w-12 h-12 bg-gradient-to-r from-[#AD0000] to-red-600 rounded-full flex items-center justify-center",children:e.jsx(O,{className:"w-6 h-6 text-white"})}),e.jsx(C,{className:"text-xl",children:n.name}),e.jsxs("div",{className:"text-3xl font-bold text-[#AD0000]",children:[n.price,e.jsx("span",{className:"text-lg text-gray-600",children:n.id==="test-premium"?"/24 hours":"/month"})]}),e.jsx(E,{children:n.operations})]}),e.jsx(N,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-semibold",children:"Included features:"}),e.jsx("ul",{className:"space-y-1",children:n.features.map((c,d)=>e.jsxs("li",{className:"flex items-center text-sm",children:[e.jsx(B,{className:"w-4 h-4 text-green-500 mr-2"}),c]},d))})]})})]}),!i&&r!=="test-premium"&&e.jsxs(v,{children:[e.jsxs(j,{children:[e.jsx(C,{children:"Create Your Account"}),e.jsx(E,{children:"We'll create your account and set up your subscription"})]}),e.jsxs(N,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(w,{htmlFor:"email",children:"Email Address *"}),e.jsx(y,{id:"email",type:"email",value:h,onChange:c=>S(c.target.value),placeholder:"your@email.com",required:!0,"data-testid":"input-email"})]}),e.jsxs("div",{children:[e.jsx(w,{htmlFor:"password",children:"Password *"}),e.jsx(y,{id:"password",type:"password",value:f,onChange:c=>I(c.target.value),placeholder:"Minimum 8 characters",required:!0,"data-testid":"input-password"})]}),e.jsxs("div",{children:[e.jsx(w,{htmlFor:"confirmPassword",children:"Confirm Password *"}),e.jsx(y,{id:"confirmPassword",type:"password",value:P,onChange:c=>L(c.target.value),placeholder:"Confirm your password",required:!0,"data-testid":"input-confirm-password"})]}),e.jsxs("div",{children:[e.jsx(w,{htmlFor:"companyName",children:"Company Name (Optional)"}),e.jsx(y,{id:"companyName",type:"text",value:k,onChange:c=>_(c.target.value),placeholder:"Your company name","data-testid":"input-company"})]})]})]}),e.jsxs(v,{children:[e.jsxs(j,{children:[e.jsx(C,{children:"Payment"}),e.jsx(E,{children:r==="premium"?"Choose your preferred payment method":"You'll be redirected to Stripe to securely enter your payment details"})]}),e.jsxs(N,{children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 p-4 rounded-lg mb-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{children:n.name}),e.jsxs("span",{className:"font-semibold",children:[n.price,"/month"]})]}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Billed monthly • Cancel anytime • 30-day money back guarantee"})]}),(r==="premium"||r==="test-premium"||r==="enterprise")&&e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:["Pay securely with PayPal - ",n.price,r==="test-premium"?" (24-hour access)":"/month"]}),e.jsx(V,{amount:r==="test-premium"?"1.00":r==="enterprise"?"99.00":"29.00",currency:"USD",intent:"CAPTURE",className:"w-full py-3 text-lg",children:"Complete Payment"})]})})]})]}),g&&e.jsx($,{variant:"destructive",children:e.jsx(q,{children:g})}),r!=="premium"&&r!=="test-premium"&&r!=="enterprise"&&e.jsx(b,{type:"submit",disabled:l,className:"w-full bg-[#AD0000] hover:bg-red-700 text-white py-3 text-lg","data-testid":"button-continue-payment",children:l?e.jsxs(e.Fragment,{children:[e.jsx(A,{className:"w-5 h-5 mr-2 animate-spin"}),"Creating subscription..."]}):`Continue to Payment - ${n.price}/month`}),e.jsx("div",{className:"text-center",children:e.jsx(b,{type:"button",variant:"link",onClick:()=>t("/simple-pricing"),className:"text-gray-600 dark:text-gray-400",children:"← Change plan"})})]})]})})}export{ce as default};
